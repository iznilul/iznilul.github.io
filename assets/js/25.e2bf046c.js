(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{436:function(t,s,_){"use strict";_.r(s);var v=_(2),r=Object(v.a)({},(function(){var t=this,s=t.$createElement,_=t._self._c||s;return _("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[_("h1",{attrs:{id:"挖矿病毒的解决"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#挖矿病毒的解决"}},[t._v("#")]),t._v(" 挖矿病毒的解决")]),t._v(" "),_("p",[t._v("[TOC]")]),t._v(" "),_("h2",{attrs:{id:"_0x01前言"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_0x01前言"}},[t._v("#")]),t._v(" 0x01前言")]),t._v(" "),_("p",[t._v("今天在朋友的服务器上部署springboot的时候发现变得特别卡，top命令查看")]),t._v(" "),_("p",[_("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/iznilul/img/1645446250472.png",alt:""}})]),t._v(" "),_("p",[t._v("cpu根本停不下来，寻思着自己也没运行什么太大内存的进程。")]),t._v(" "),_("p",[t._v("google了一下这个占用率很大kthreaddi进程，好家伙，原来是植入的挖矿病毒")]),t._v(" "),_("p",[t._v("服务器成了肉鸡，人都不能沦为砧板鱼肉，服务器亦是如此，抄家伙干他(╯‵□′)╯︵┻━┻")]),t._v(" "),_("h2",{attrs:{id:"_0x02解决过程"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_0x02解决过程"}},[t._v("#")]),t._v(" 0x02解决过程")]),t._v(" "),_("p",[t._v("kill -9 pid")]),t._v(" "),_("p",[t._v("没用，进程会自动重启，由于云服务器是阿里云的，只好按照阿里云的参考教程去处理")]),t._v(" "),_("p",[t._v("https://help.aliyun.com/document_detail/161236.html?spm=a2c4g.11186623.6.739.d8277be2kuFClK")]),t._v(" "),_("p",[_("strong",[t._v("cd /proc/xxx")])]),t._v(" "),_("p",[t._v("查看proc下的进程信息")]),t._v(" "),_("p",[_("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/iznilul/img/1645446252956.png",alt:""}})]),t._v(" "),_("p",[_("strong",[t._v("ls -l exe")])]),t._v(" "),_("p",[t._v("本来想的是删掉exe，不过这该死的链接文件夹显示被删除了，另谋思路，看看定时任务")]),t._v(" "),_("p",[_("strong",[t._v("crontab -l")]),t._v(" 查看定时任务")]),t._v(" "),_("p",[_("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/iznilul/img/1645446255101.png",alt:""}})]),t._v(" "),_("p",[_("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/iznilul/img/1645446253637.png",alt:""}})]),t._v(" "),_("p",[t._v("定时任务在不断变化，删了也不管用")]),t._v(" "),_("p",[t._v("接下来从网上查到的方法")]),t._v(" "),_("p",[_("strong",[t._v("最后是把crontab里的执行文件删掉，再用kill -9 干掉kthreadaddi，最后crontab -r 删掉定时任务")])]),t._v(" "),_("p",[_("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/iznilul/img/1645446257661.png",alt:""}})]),t._v(" "),_("p",[t._v("然后crontab -l 查看定时任务发现清净了")]),t._v(" "),_("p",[t._v("top查看cpu占用率回归正常")]),t._v(" "),_("p",[_("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/iznilul/img/1645446258205.png",alt:""}})]),t._v(" "),_("p",[t._v("最后又删了一下.ssh/authorized_keys下的不知名公钥 ，预防留后门")]),t._v(" "),_("h2",{attrs:{id:"_0x03-总结-参考资料"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_0x03-总结-参考资料"}},[t._v("#")]),t._v(" 0x03 总结&参考资料")]),t._v(" "),_("p",[t._v("平时要记得做好服务器的防范，不该开的端口不要开( ╯□╰ )")]),t._v(" "),_("p",[t._v("https://blog.csdn.net/weixin_38067745/article/details/103687726")])])}),[],!1,null,null,null);s.default=r.exports}}]);